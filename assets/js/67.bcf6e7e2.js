(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{623:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[t._v("#")]),t._v(" Webpack")]),t._v(" "),a("p",[a("strong",[t._v("为什么需要 webpack？")])]),t._v(" "),a("ul",[a("li",[t._v("ES6 模块化，浏览器暂不支持")]),t._v(" "),a("li",[t._v("ES6 语法，浏览器目前并不完全支持")]),t._v(" "),a("li",[t._v("压缩代码，整合代码，提高网页加载速度")])]),t._v(" "),a("h2",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),a("h3",{attrs:{id:"什么是-webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-webpack"}},[t._v("#")]),t._v(" 什么是 Webpack")]),t._v(" "),a("ul",[a("li",[t._v("Webpack 是一个模块打包器（bundler）")]),t._v(" "),a("li",[t._v("Webpack 中前端所有的资源文件（js/css/img...）都作为模块处理")]),t._v(" "),a("li",[t._v("根据模块之间的依赖关系，按照一定规则把模块组织合并为一个 JS 文件")])]),t._v(" "),a("h2",{attrs:{id:"组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组成"}},[t._v("#")]),t._v(" 组成")]),t._v(" "),a("h3",{attrs:{id:"loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[t._v("#")]),t._v(" Loader")]),t._v(" "),a("ul",[a("li",[t._v("Wepack 本身只能加载 JS 模块，如果要加载其他类型文件，需要使用 Loader 进行转换/加载，执行顺序从后往前")]),t._v(" "),a("li",[t._v("Loader 本身也是运行在 node.js 环境中的 Javascript 模块")]),t._v(" "),a("li",[t._v("本身是一个函数，接收源文件作为参数，返回转换的结果")]),t._v(" "),a("li",[t._v("loader 一般以 xxx-loader 方式命名，xxx 表示要做的转换功能，如 json-loader")])]),t._v(" "),a("h3",{attrs:{id:"plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin"}},[t._v("#")]),t._v(" Plugin")]),t._v(" "),a("ul",[a("li",[t._v("插件用来完成一些 loader 不能完成的功能")]),t._v(" "),a("li",[t._v("插件一般在 Webpack 的配置信息 plugins 选项中指定")]),t._v(" "),a("li",[t._v("Webpack 本身内置了一些常用插件，其他通过 npm 安装")])]),t._v(" "),a("h3",{attrs:{id:"module-chunk-bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-chunk-bundle"}},[t._v("#")]),t._v(" module,chunk,bundle")]),t._v(" "),a("ul",[a("li",[t._v("module - 各个源码文件，webpack 中一切皆模块")]),t._v(" "),a("li",[t._v("chunk - 多模块输出合并成的，如 entry、import()，一个 chunk 输出一个 bundle")]),t._v(" "),a("li",[t._v("bundle - 最终的输出文件")])]),t._v(" "),a("h2",{attrs:{id:"基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[t._v("#")]),t._v(" 基本配置")]),t._v(" "),a("ul",[a("li",[t._v("拆分配置和 merge：dev、prod、common，使用 smart 引入")]),t._v(" "),a("li",[t._v("配置本地服务：本地服务器、跨域代理")]),t._v(" "),a("li",[t._v("处理 ES6：babel")]),t._v(" "),a("li",[t._v("处理 CSS：postcss、css-loader、style-loader")]),t._v(" "),a("li",[t._v("处理图片：小图片使用 base64 格式输出（减少一次 http 请求）")])]),t._v(" "),a("h3",{attrs:{id:"webpack-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-配置"}},[t._v("#")]),t._v(" webpack 配置")]),t._v(" "),a("p",[t._v("安装："),a("br"),t._v(" "),a("code",[t._v("npm install webapck webpack-cli -D")]),a("br"),t._v("\n新建配置文件：webpack.config.js，")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入nodejs path模块，寻找当前文件目录  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入插件，注意需要先使用npm安装该插件  ")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or production，开发模式  ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口，__dirname表示当前目录，后面表示拼接目录，寻找到index.js  ")]),t._v("\n    entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n    output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出  ")]),t._v("\n        filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n        path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n    plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件配置  ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 刚引入的插件  ")]),t._v("\n            template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模板，找到文件  ")]),t._v("\n            filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据模板插入代码产出的文件，到dist目录下  ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n    devServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动bending服务  ")]),t._v("\n        port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n        contentBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前目录  ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),a("p",[t._v("经过以上配置，以及在 package.json 中添加运行命令后，启动服务后，根据端口打开相应文件，可以看到 index.js 被成功运行。"),a("br"),t._v("\n过程：wepack 入口找到 index 文件，然后输出的 bundle.js 中就打包了 index.js 文件。随后在插件的 index.html 文件中自动引入 bundle.js，产出的 html 文件中就运行了 index.js。")]),t._v(" "),a("p",[a("strong",[t._v("webpack 生产环境打包")]),a("br"),t._v("\n新建 webpack.prod.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主要改变  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v(" mode 设为 production  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v(" 删除 devServer，不需要本地服务  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),t._v(" output 中 filename 改变，用于根据代码内容，计算出 hash 值，若代码发生改变，则文件名改变，以最大程度命中 http 缓存  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n\n    entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n    output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出  ")]),t._v("\n        filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.[contenthash].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n        path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n    plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件配置  ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 刚引入的插件  ")]),t._v("\n            tmplate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模板，找到文件  ")]),t._v("\n            filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),t._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),a("h3",{attrs:{id:"添加-babel-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加-babel-配置"}},[t._v("#")]),t._v(" 添加 babel 配置")]),t._v(" "),a("p",[t._v("babel 和 webpack关系：")]),t._v(" "),a("ul",[a("li",[t._v("babel 和 webpack 是分离的")]),t._v(" "),a("li",[t._v("babel 作用是将 ES6 代码转换为 ES5 代码")]),t._v(" "),a("li",[t._v("但 babel 提供了插件供 webpack 使用，所以 webpack 引入 babel 打包即可实现代码转换")])]),t._v(" "),a("p",[t._v("babel 安装："),a("br"),t._v(" "),a("code",[t._v("npm install @babel/core @babel/preset-env babel-loader -D")]),a("br"),t._v("\n注：@babel 后面表示 babel 的一些模块，preset-env 是很多配置插件的集合，babel-loader 是 babel 提供给 webpack 使用的插件。"),a("br"),t._v("\nbabel 配置："),a("br"),t._v("\n新建"),a("code",[t._v(".babelrc")]),t._v("文件，其中为 JSON 格式：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .babelrc，作用为实现代码转化  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件配置  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),a("p",[t._v("webpack：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加和改动  ")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块配置  ")]),t._v("\n        rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对js文件进行解析  ")]),t._v("\n                loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加解析器  ")]),t._v("\n                include"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 包括的路径  ")]),t._v("\n                exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除路径  ")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n\n")])])]),a("h3",{attrs:{id:"webpack-多入口配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-多入口配置"}},[t._v("#")]),t._v(" webpack 多入口配置")]),t._v(" "),a("ul",[a("li",[t._v("entry 中配置多个入口")]),t._v(" "),a("li",[t._v("output 中配置多个输出文件，使用变量"),a("code",[t._v("[name]")])]),t._v(" "),a("li",[t._v("多个 HTMLWebpackPlugin 配置")])]),t._v(" "),a("h3",{attrs:{id:"抽离-css-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#抽离-css-文件"}},[t._v("#")]),t._v(" 抽离 CSS 文件")]),t._v(" "),a("ul",[a("li",[t._v("生产环境下使用")]),t._v(" "),a("li",[t._v("MiniCssExtractPlugin 添加 hash，命中 css 缓存")]),t._v(" "),a("li",[t._v("抽离出来之后再使用插件对 css 进行压缩")])]),t._v(" "),a("h3",{attrs:{id:"抽离公共代码和第三方代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#抽离公共代码和第三方代码"}},[t._v("#")]),t._v(" 抽离公共代码和第三方代码")]),t._v(" "),a("ul",[a("li",[t._v("第三方代码不会变化，所以不用重新打包，抽离减少重复引用，从而减小生产环境打包体积")]),t._v(" "),a("li",[t._v("splitChunks 分模块，然后 cacheGroups 中配置")]),t._v(" "),a("li",[t._v("HtmlWebpack 中引入分割后的代码 chunk")])]),t._v(" "),a("h3",{attrs:{id:"webpack-性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-性能优化"}},[t._v("#")]),t._v(" webpack 性能优化")]),t._v(" "),a("ul",[a("li",[t._v("优化打包构建速度 —— 开发体验和效率")]),t._v(" "),a("li",[t._v("优化产出代码 —— 产品性能")])]),t._v(" "),a("p",[a("strong",[t._v("构建速度")])]),t._v(" "),a("ul",[a("li",[t._v("优化 babel-loader：开启缓存，添加 cacheDirectory，然后排除文件范围")]),t._v(" "),a("li",[t._v("IgnorePlugin：避免引入无用模块，忽略目录，手动引用需要的部分即可")]),t._v(" "),a("li",[t._v("noParse：引入，但不打包，减小体积")]),t._v(" "),a("li",[t._v("happyPack：多进程打包，将一些资源放到 happyPack 中打包，添加 id 和 use")]),t._v(" "),a("li",[t._v("ParallelUglifyPlugin：多进程压缩 js，内置 Uglify 压缩 js，用于生产环境（注意：项目较大时开启多进程才会加快速度）")]),t._v(" "),a("li",[t._v("自动刷新：开发环境配置了 dev-server 会自动开启，代码改变自动刷新浏览器")]),t._v(" "),a("li",[t._v("热更新：新代码生效，网页不刷新，状态不丢失，使用 HotModuleReplacement 插件，dev-server 中 hot:true，需要注册一个监听范围，书写热更新之后的代码逻辑")]),t._v(" "),a("li",[t._v("DllPlugin：动态链接库插件，同一个版本只构建一次，已经内置，打包出 dll 文件，DllReferencePlugin 使用 dll 文件")])]),t._v(" "),a("p",[a("strong",[t._v("产出代码")])]),t._v(" "),a("ul",[a("li",[t._v("小图片使用 base64 编码，减少一次 http 请求")]),t._v(" "),a("li",[t._v("bundle 加 hash")]),t._v(" "),a("li",[t._v("懒加载")]),t._v(" "),a("li",[t._v("提取公共代码")]),t._v(" "),a("li",[t._v("CDN 加速：配置 publicPath 路径前缀，然后将 js 文件和 css 文件、图片等上传到 cdn")])]),t._v(" "),a("p",[a("strong",[t._v("Tree-shaking")])]),t._v(" "),a("ul",[a("li",[t._v("production 模式内置")]),t._v(" "),a("li",[t._v("没有用到的代码不会打包")])]),t._v(" "),a("h2",{attrs:{id:"linux-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-命令"}},[t._v("#")]),t._v(" linux 命令")]),t._v(" "),a("ul",[a("li",[t._v("公司的线上机器一般都是 linux")]),t._v(" "),a("li",[t._v("测试机也需要保持一致，使用 linux")]),t._v(" "),a("li",[t._v("测试机或者线上机出现问题，本地又不能复现，需要去排查")])]),t._v(" "),a("h3",{attrs:{id:"增删改查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增删改查"}},[t._v("#")]),t._v(" 增删改查")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("ssh work@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".10")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".21")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//进入线上机，work是用户名，后面是线上机地址，然后需要输入密码即可进入  ")]),t._v("\n\nclear    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清屏  ")]),t._v("\n\ncd 目录   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进入某一目录  ")]),t._v("\ncd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回上一级目录  ")]),t._v("\n\nls       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看当前目录文件（平铺）  ")]),t._v("\nls "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看当前目录文件（平铺，包括隐藏文件）  ")]),t._v("\nll       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以列表形式查看文件（包括隐藏文件）  ")]),t._v("\nll abc   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看文件夹abc  ")]),t._v("\n\ncat d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打开文件d.js查看内容  ")]),t._v("\n\ngrep "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找，在package.json文件中查找babel  ")]),t._v("\n\nmkdir abc    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新建文件夹abc  ")]),t._v("\ntouch d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新建文件d.js  ")]),t._v("\nvi t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新建文件t.js并打开（vim编辑器，同vim命令）  ")]),t._v("\n\nmv index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html index1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改文件名index->index1  ")]),t._v("\nmv index1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将index1.html移动到上级目录  ")]),t._v("\ncp a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js a1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拷贝文件，拷贝a.js，拷贝的文件名为a1.js  ")]),t._v("\n\nrm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rf abc   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除文件夹abc（-rf递归强制删除)  ")]),t._v("\nrm a1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除文件  ")]),t._v("\n\nCtrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 强制中断  ")]),t._v("\nCtrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" z    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 挂起任务，任务仍然在进程中  ")]),t._v("\n")])])]),a("h3",{attrs:{id:"vim-编辑器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vim-编辑器"}},[t._v("#")]),t._v(" vim 编辑器")]),t._v(" "),a("ul",[a("li",[t._v("只能使用键盘方向键进行上下左右操作，命令都跟在冒号（:）后面")]),t._v(" "),a("li",[t._v("键盘点击 i，进入 INSERT 模式，可以开始插入内容")]),t._v(" "),a("li",[t._v("点击 esc，退出 INSERT 模式")]),t._v(" "),a("li",[t._v("输入冒号（:），输入 w，然后回车，即可以写入内容。再次回车，输入 q，回车退出")]),t._v(" "),a("li",[t._v("q! 表示强制退出")]),t._v(" "),a("li",[t._v("vimtutor 命令进入 vim helpler")])]),t._v(" "),a("h2",{attrs:{id:"npm-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-命令"}},[t._v("#")]),t._v(" npm 命令")]),t._v(" "),a("ol",[a("li",[t._v("查看镜像源"),a("br"),t._v(" "),a("code",[t._v("npm get registry")])]),t._v(" "),a("li",[t._v("切换官方源"),a("br"),t._v(" "),a("code",[t._v("npm config set registry http://www.npmjs.org")])]),t._v(" "),a("li",[t._v("切换淘宝源"),a("br"),t._v(" "),a("code",[t._v("npm config set registry http://registry.npm.taobao.org")])])]),t._v(" "),a("h2",{attrs:{id:"yarn-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn-命令"}},[t._v("#")]),t._v(" yarn 命令")]),t._v(" "),a("ol",[a("li",[t._v("查看镜像源"),a("br"),t._v(" "),a("code",[t._v("yarn config get registry")])]),t._v(" "),a("li",[t._v("切换为官方源"),a("br"),t._v(" "),a("code",[t._v("yarn config set https://registry.yarnpkg.com")])]),t._v(" "),a("li",[t._v("切换为淘宝源"),a("br"),t._v(" "),a("code",[t._v("yarn config set https://registry.npm.taobao.org")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);